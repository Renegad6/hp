#!/bin/sh -e
# $Header: /usersnfs/deantoni/common/bin/RCS/btags,v 1.1 2016/08/02 09:50:22 deantoni Exp $

getScriptPath () {
  echo ${0%/*}/
}
source $(getScriptPath)/common.sh
rm -f ign.tags;

if [ ! -d ign.rebtags ]
then
  ctags -R -a --exclude=work --exclude=*.py --exclude=.git --exclude=.svn --exclude=opkgbuild --exclude=TARGETS --exclude=*.js --exclude=3rdparty --exclude=third-party --exclude=*.html --c++-kinds=+p --fields=+iaS --extras=+q .;
else
    for d in $(cat ign.rebtags|grep -v "^#");
    do
      /usr/local/bin/ctags -R -a --exclude=work --exclude=*.py --exclude=.git --exclude=.svn --exclude=opkgbuild --exclude=TARGETS --exclude=*.js --exclude=3rdparty --exclude=third-party --exclude=*.html --c++-kinds=+p --fields=+iaS --extras=+q $d;
    done;
fi;

mv tags ign.tags;
exit 0;
